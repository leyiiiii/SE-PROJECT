"use strict";(self["webpackChunkMoShu"]=self["webpackChunkMoShu"]||[]).push([[113],{90113:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var a=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"bg"},[e("el-button",{staticClass:"back",on:{click:t.back}},[t._v("返回")]),e("el-button",{staticClass:"getAddress",on:{click:function(e){t.dialogVisible=!0}}},[t._v("生成预览链接")]),e("el-dialog",{attrs:{"append-to-body":"true",title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("h3",[t._v("复制以下链接，在浏览器打开以观看原型设计页面预览图:")]),e("p",[t._v(t._s(t.currentWebsiteLink))]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)]),e("el-select",{staticClass:"selectPage",attrs:{clearable:"",placeholder:"切换页面"},on:{change:function(e){return t.select(t.value)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.designList,(function(i,a){return e("el-option",{key:a,attrs:{value:"页面"+(a+1)+"："+i.title}},[t._v(" "+t._s("页面"+(a+1)+"："+i.title)+" ")])})),1),e("div",{staticClass:"canvas-container"},[e("div",{staticClass:"canvas",style:{...t.getCanvasStyle(t.canvasStyleData),width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}},t._l(t.copyData,(function(t,i){return e("ComponentWrapper",{key:i,attrs:{config:t}})})),1)])],1)},n=[],s=i(79748),o=i(20629),l=function(){var t=this,e=t._self._c;return e("div",{on:{click:t.onClick,mouseenter:t.onMouseEnter}},[t.config.component.startsWith("SVG")?e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}}):e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}})],1)},r=[],c=i(63229),p=i(26683),h=i(54003),u={mixins:[p.tA],props:{config:{type:Object,required:!0,default:()=>{}}},mounted(){(0,c.Z)(this.$refs.component.$el,this.config.animations)},methods:{getStyle:s.C2,getSVGStyle:s.WF,onClick(){const t=this.config.events;Object.keys(t).forEach((e=>{this[e](t[e])})),h.Z.$emit("v-click",this.config.id)},onMouseEnter(){h.Z.$emit("v-hover",this.config.id)}}},g=u,d=i(1001),m=(0,d.Z)(g,l,r,!1,null,"195f3027",null),v=m.exports,f=i(91457),b=i(22648),y={components:{ComponentWrapper:v},props:{isScreenshot:{type:Boolean,default:!1}},data(){return{copyData:[],designList:[],value:"",status:!1,dialogVisible:!1,currentWebsiteLink:window.location.href,previewEnableList:[]}},computed:(0,o.rn)(["componentData","canvasStyleData"]),created(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")});var e=this.$route.params.id.split("&"),i="/api/v1/diagram/preview/list?belongTo="+e[0];this.$axios({method:"get",url:i,headers:t}).then((t=>{this.previewEnableList=t.data.results;var i=!1;for(let a=0;a<this.previewEnableList.length;a++)if(this.previewEnableList[a].id===e[2]){i=!0;break}i||this.$store.state._isLogin_||this.$alert("此原型设计页面的预览已被关闭，无法查看，点击确定后将返回上一网页","提示",{confirmButtonText:"OK",callback:t=>{this.$router.back()}})})).catch((t=>{console.log(t)})),t={},localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/diagram/list?belongTo="+this.$route.params.id.split("&")[0],headers:t}).then((t=>{this.designList=t.data.results})).catch((t=>{console.log(t)})),t={},localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/diagram/"+this.$route.params.id.split("&")[2],headers:t}).then((t=>{var e=t.data;this.title=e.title,this.$store.commit("setCanvasStyle",JSON.parse(e.canvasStyleData)),this.$store.commit("setComponentData",JSON.parse(e.componentData)),this.$set(this,"copyData",(0,b.p$)(JSON.parse(e.componentData)))})).catch((t=>{console.log(t)}))},methods:{getStyle:s.C2,getCanvasStyle:s.$i,changeStyleWithScale:f.EY,close(){this.$emit("close")},back(){this.$router.back()},getAddress(){this.$message(window.location.href)},select(t){let e=t.split("：")[0].substring(2,t.indexOf("："));var i=this.$route.params.id.split("&"),a=i[0],n=this.designList[e-1].id,s=this.currentWebsiteLink.split("/preview")[0]+"/preview/"+a+"&design&"+n,o=!1;for(let l=0;l<this.previewEnableList.length;l++)if(this.previewEnableList[l].id===n){o=!0;break}o||this.$store.state._isLogin_?(o||this.$store.state._isLogin_)&&(this.$store.commit("setCanvasStyle",JSON.parse(this.designList[e-1].canvasStyleData)),this.$store.commit("setComponentData",JSON.parse(this.designList[e-1].componentData)),this.$set(this,"copyData",(0,b.p$)(JSON.parse(this.designList[e-1].componentData))),this.currentWebsiteLink=s):this.$alert("此原型设计页面的预览已被关闭，无法查看","提示",{confirmButtonText:"OK",callback:t=>{}})}}},k=y,S=(0,d.Z)(k,a,n,!1,null,"360752ae",null),$=S.exports},26683:function(t,e,i){i.d(e,{oQ:function(){return s},tA:function(){return n}});const a={redirect(t){t&&(window.location.href=t)},alert(t){t&&alert(t)}},n={methods:a},s=[{key:"redirect",label:"跳转事件",event:a.redirect,param:""},{key:"alert",label:"alert 事件",event:a.alert,param:""}]},63229:function(t,e,i){async function a(t,e=[]){const i=e=>new Promise((i=>{const{animationTime:a,value:s="",isLoop:o}=e;t.style.setProperty("--time",a+"s"),t.classList.add(s,"animated",n(o));const l=()=>{t.removeEventListener("animationend",l),t.removeEventListener("animationcancel",l),t.classList.remove(s,"animated",n(o)),t.style.removeProperty("--time"),i()};t.addEventListener("animationend",l),t.addEventListener("animationcancel",l)}));for(let a=0,n=e.length;a<n;a++)await i(e[a])}function n(t){return t?"infinite":"no-infinite"}i.d(e,{Z:function(){return a}})}}]);
//# sourceMappingURL=113.43edf2e7.js.map