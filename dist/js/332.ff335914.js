"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[332],{7332:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("el-row",{attrs:{justify:"center",type:"flex"}},[e("img",{attrs:{id:"bg",src:s(2310)}}),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"Right"},[e("el-row",{attrs:{justify:"center",type:"flex"}},[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"Title"},[t._v(" 墨书登录 ")])])],1),e("el-row",{attrs:{justify:"center",type:"flex"}},[e("el-col",{attrs:{span:14}},[e("div",{staticClass:"insertBox"},[e("el-input",{attrs:{placeholder:"请输入用户名/邮箱"},model:{value:t.inputName,callback:function(e){t.inputName=e},expression:"inputName"}})],1)])],1),e("el-row",{attrs:{justify:"center",type:"flex"}},[e("el-col",{attrs:{span:14}},[e("div",{staticClass:"insertBox"},[e("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Login.apply(null,arguments)}},model:{value:t.inputPwd,callback:function(e){t.inputPwd=e},expression:"inputPwd"}}),e("el-button",{staticClass:"registerButton",attrs:{type:"text"},on:{click:t.gotoRegister}},[t._v("注册")])],1)])],1),e("el-row",{attrs:{justify:"center",type:"flex"}},[e("el-button",{staticClass:"Login",attrs:{type:"primary"},on:{click:t.Login}},[t._v("登录")])],1)],1)])],1)},i=[],a=s(4112),r={name:"Login",components:{Navi:a.Z},data(){return{inputName:"",inputPwd:"",bgHeight:""}},mounted(){this.bgHeight=document.documentElement.clientHeight-$("#header").outerHeight(!0)-1},methods:{gotoRegister(){this.$router.push("/register")},Login(){if(""==this.inputName)return void this.$message.warning("用户名不可为空");if(""==this.inputPwd)return void this.$message.warning("密码不可为空");const t=new FormData;t.append("username",this.inputName),t.append("password",this.inputPwd),this.$axios({method:"post",url:"/api/v1/auth/login/",data:t}).then((t=>{console.log(t),localStorage.setItem("token",t.data.tokens.access),this.$message.success("登录成功！"),this.$store.dispatch("saveUserInfo",{user:{username:t.data.username,confirmed:!0,id:t.data.id}});const e=localStorage.getItem("preRoute");setTimeout((()=>{null==e||"/register"===e?this.$router.push("/"):this.$router.push({path:e})}),500)})).catch((t=>{console.log(t),this.$message.warning("用户名/邮箱不存在或密码错误")}))}}},o=r,l=s(3736),u=(0,l.Z)(o,n,i,!1,null,"47ae5304",null),c=u.exports},2310:function(t,e,s){t.exports=s.p+"img/Teamwork3.9ba0026c.jpg"}}]);
//# sourceMappingURL=332.ff335914.js.map