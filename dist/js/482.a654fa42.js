"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[482,594],{7715:function(t,e,o){o.r(e),o.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"content"},[e("div",{staticClass:"project-name"},[t._v(t._s(t.projectName))]),e("div",{staticClass:"content-title"},[e("i",{staticClass:"el-icon-s-unfold"}),t._v(" 文档 "),e("div",{staticClass:"add-icon",on:{click:t.add}},[t._v("+")])]),t._l(t.documentList,(function(o){return e("li",{key:o.id,on:{click:function(e){return t.openDoc(o.id)}}},[e("i",{staticClass:"el-icon-document"}),t._v(" "+t._s(o.title)+" ")])}))],2)]),e("el-col",{attrs:{span:18,offset:1}},[t.status?e("div",{staticClass:"doc-title"},[t._v(t._s(t.title))]):t._e(),t.status?e("div",{staticClass:"doc-desc"},[t._v(t._s(t.description))]):t._e(),t.isOpenADoc?e("Editor"):t._e()],1)],1)},a=[],i=o(8417),n={name:"test",components:{Editor:i.Z},data(){return{isOpenADoc:!0,status:!1,iconFormVisible:!1,userInfo:{},dialogTitle:"增加",rowIndex:null,projectId:"",projectName:"",haveDocument:!1,documentId:"",title:"",description:"",documentContent:"",createdAt:"",createdBy:"",belongTo:"",updatedAt:"",documentList:[]}},created(){var t=this.$route.params.id.split("&");this.projectId=t[0],t.length>1?(this.isOpenADoc=!0,this.documentId=t[2],this.getDocDetail()):this.isOpenADoc=!1,this.getProject(),this.getDocument()},methods:{openDoc(t){this.$router.replace("/project/"+this.projectId+"&doc&"+t),window.location.reload()},add(){let t=new FormData;t.append("title","Unknown Document"),t.append("description","文档描述"),t.append("content",JSON.stringify("<p>this is a document</p>")),t.append("projectId",this.projectId);var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"post",url:"/api/v1/document/create/"+this.projectId,data:t,headers:e}).then((t=>{console.log(t.data),this.openDoc(t.data.id)})).catch((t=>{console.log(t)}))},handleEdit(t,e){this.dialogTitle="编辑",this.userInfo=e,this.iconFormVisible=!0,this.rowIndex=t},submitUser(){if("编辑"===this.dialogTitle)return this.tableData.splice(this.rowIndex,1,this.userInfo),void(this.iconFormVisible=!1);this.tableData.splice(0,0,this.userInfo),this.iconFormVisible=!1},remove(t,e){this.$confirm(`确定删除${e.name}吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{this.tableData.splice(t,1)}))},async getDocDetail(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),await this.$axios({method:"get",url:"/api/v1/document/"+this.documentId,headers:t}).then((t=>{console.log(t.data);var e=t.data;this.documentContent=e.content,this.belongTo=e.belongTo,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.createdBy=e.createdBy,this.title=e.title,this.description=e.description,this.status=!0})).catch((t=>{console.log(t)}))},getDocument(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/document/list?belongTo="+this.projectId,headers:t}).then((t=>{console.log(t.data.results),this.documentList=t.data.results,this.documentList.length>0&&(this.haveDocument=!0)})).catch((t=>{console.log(t)}))},getProject(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/project/"+this.projectId,headers:t}).then((t=>{this.projectId=this.projectId,this.projectName=t.data.title})).catch((t=>{console.log(t)}))}}},l=n,c=o(3736),r=(0,c.Z)(l,s,a,!1,null,"66687e49",null),d=r.exports},6251:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"Left"},[e("Navi")],1)]),e("el-col",{attrs:{span:22}},[e("div",{staticClass:"Right"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"Title"},[e("span",[t._v(t._s(t.form.name))])])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"Buttons"},[e("el-button",{attrs:{type:"info",round:"",icon:"el-icon-edit"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("编辑项目")]),e("el-dialog",{attrs:{title:"编辑项目",visible:t.dialogVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{attrs:{model:t.form,"label-width":"auto"}},[e("el-form-item",{attrs:{label:"项目名字"}},[e("el-input",{model:{value:t.form.nameTemp,callback:function(e){t.$set(t.form,"nameTemp",e)},expression:"form.nameTemp"}})],1),e("el-form-item",{attrs:{label:"项目简介"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2},autocomplete:"off",resize:"none"},model:{value:t.form.descTemp,callback:function(e){t.$set(t.form,"descTemp",e)},expression:"form.descTemp"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancelChanges}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("保存")])],1)],1),e("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"不了，谢谢",icon:"el-icon-info","icon-color":"red",title:"您确定要删除此项目？"},on:{confirm:t.confirmDelete}},[e("el-button",{attrs:{slot:"reference",type:"danger",round:""},slot:"reference"},[t._v("删除项目")])],1)],1)])],1),e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"Title2"},[e("span",[t._v("项目简介:")])])]),t.hasChinese()?e("el-col",{attrs:{span:20}},[e("div",{staticClass:"Desc"},[e("span",[t._v(t._s(t.form.desc))])])]):e("el-col",{attrs:{span:20}},[e("div",{staticClass:"Desc2"},[e("span",[t._v(t._s(t.form.desc))])])])],1),e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"function"},[e("el-tabs",{model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[e("el-tab-pane",{attrs:{label:"文档",name:"first"}},[e("Doc")],1),e("el-tab-pane",{attrs:{label:"设计原型",name:"second"}},[t._v("设计原型")]),e("el-tab-pane",{attrs:{label:"UML绘制图",name:"third"},on:{click:t.toDraw}},[t._v("UML绘制图")])],1)],1)])],1)],1)])],1)},a=[],i=o(7742),n=o(7715),l={name:"Project",components:{Navi:i.Z,Doc:n["default"]},data(){return{dialogVisible:!1,activeTab:"first",form:{name:"",desc:"",nameTemp:"",descTemp:""}}},mounted(){var t=this.$route.params.id.split("&");this.projectId=t[0],this.getProjectInfo(),t.length>1?("doc"==t[1]&&console.log("!!!"),this.isOpenADoc=!0,this.documentId=t[2]):this.isOpenADoc=!1},methods:{cancelChanges(){this.dialogVisible=!1,this.form.nameTemp=this.form.name,this.form.descTemp=this.form.desc},handleClose(){this.dialogVisible=!1,this.form.nameTemp=this.form.name,this.form.descTemp=this.form.desc},saveEdit(){this.dialogVisible=!1,this.form.name=this.form.nameTemp,this.form.desc=this.form.descTemp},hasChinese(){const t=/[\u3040-\u30ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff\uff66-\uff9f]/,e=this.form.desc.match(t);return e?(console.log("true"),!0):(console.log("false"),!1)},confirmDelete(){},toDraw(){window.open("https://app.diagrams.net/","_blank")},getProjectInfo(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/project/"+this.projectId,headers:t}).then((t=>{console.log(t),console.log("YES"),this.form.name=t.data.title,this.form.desc=t.data.description,this.form.nameTemp=this.form.name,this.form.descTemp=this.form.desc})).catch((t=>{console.log(t)}))}}},c=l,r=o(3736),d=(0,r.Z)(c,s,a,!1,null,"409c7cf9",null),m=d.exports}}]);
//# sourceMappingURL=482.a654fa42.js.map