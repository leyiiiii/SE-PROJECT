"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[519],{82:function(e,t,s){s.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("el-row",{staticClass:"Nav"},[t("el-container",[t("el-aside",{attrs:{width:"auto"},nativeOn:{mouseenter:function(t){return e.collapseOpen.apply(null,arguments)},mouseleave:function(t){return e.collapseClose.apply(null,arguments)}}},[t("el-menu",{staticClass:"nav-menu",attrs:{router:!0,collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose}},[t("el-menu-item",{attrs:{index:"/login"}},[t("i",{staticClass:"el-icon-user"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.username)+" ")])]),t("el-menu-item",{attrs:{index:"/"},on:{click:e.Logout}},[t("i",{staticClass:"el-icon-switch-button"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(" 退出登录 ")])]),t("el-submenu",[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-office-building"}),t("span",[e._v(" 团队 ")])]),t("el-menu-item-group",e._l(e.joinedTeam,(function(s){return t("el-menu-item",{key:s.index,on:{click:function(t){return e.toTeam(s.id)}}},[e._v(e._s(s.teamName))])})),1)],2),t("el-menu-item",{attrs:{index:"/invitation"}},[t("i",{staticClass:"el-icon-postcard"}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(" 查看邀请 ")])]),t("el-menu-item",{attrs:{index:"/about"}},[t("i",{staticClass:"el-icon-collection"}),t("span",{staticClass:"mainTitle"},[e._v(" 关于墨书 ")])])],1)],1),t("el-main")],1)],1)},i=[],n=s(2094),o={data(){return{isLogin:!1,joinedTeam:[],collapseBtnClick:!1,isCollapse:!0,username:""}},created(){var e;e=n.Z.getters.getUser(n.Z.state()),e&&(this.isLogin=!0,this.username=e.user.username)},mounted(){this.getJoinedTeam()},methods:{collapseStatus(){this.collapseBtnClick=this.isCollapse,this.isCollapse=!this.isCollapse},collapseOpen(){this.collapseBtnClick||(this.isCollapse=!1)},collapseClose(){this.collapseBtnClick||(this.isCollapse=!0)},handleOpen(e,t){console.log(e,t)},handleClose(e,t){console.log(e,t)},Logout(){localStorage.removeItem("token"),this.$store.dispatch("clear"),this.$message.success("登出成功"),setTimeout((()=>{this.$router.push({path:"/"}),location.reload()}),500)},async getJoinedTeam(){if(this.isLogin){var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),await this.$axios({method:"get",url:"/api/v1/team/list",headers:e}).then((e=>{console.log(e),this.joinedTeam=e.data.results})).catch((e=>{console.log(e)}))}},toTeam(e){this.$router.push("/team/"+e),setTimeout((()=>{location.reload()}),500)},toInvitation(){this.isLogin?this.$router.push("/invitation"):this.$notify({title:"注意！",message:"请先进行登录",type:"warning"})}}},l=o,r=s(1001),p=(0,r.Z)(l,a,i,!1,null,"7dd34df4",null),c=p.exports},8519:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("el-row",{staticClass:"main",attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{span:20}},[t("div",{staticClass:"wrapper"},[t("div",{staticClass:"pic-wrapper"},[t("img",{attrs:{id:"bg",src:s(1915)}})]),t("div",{staticClass:"login-wrapper"},[t("el-row",{attrs:{justify:"center",type:"flex"}},[t("img",{attrs:{id:"logo",src:s(2533),alt:"logo"}})]),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input-name",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("i",{staticClass:"el-icon-view hidden"})]),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.realname,expression:"realname"}],staticClass:"input-name",attrs:{type:"text",placeholder:"真实姓名"},domProps:{value:e.realname},on:{input:function(t){t.target.composing||(e.realname=t.target.value)}}}),t("i",{staticClass:"el-icon-view hidden"})]),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input-name",attrs:{type:"text",placeholder:"邮箱"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("i",{staticClass:"el-icon-view hidden"})]),t("el-row",{attrs:{justify:"center",type:"flex"}},[e.canSee1?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],staticClass:"input-pwd",attrs:{type:"text",placeholder:"密码"},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password1,expression:"password1"}],staticClass:"input-pwd",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password1},on:{input:function(t){t.target.composing||(e.password1=t.target.value)}}}),t("i",{staticClass:"el-icon-view",on:{click:e.changeSee1}})]),t("el-row",{attrs:{justify:"center",type:"flex"}},[e.canSee2?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],staticClass:"input-pwd",attrs:{type:"text",placeholder:"重复密码"},domProps:{value:e.password2},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Register.apply(null,arguments)},input:function(t){t.target.composing||(e.password2=t.target.value)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],staticClass:"input-pwd",attrs:{type:"password",placeholder:"重复密码"},domProps:{value:e.password2},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Register.apply(null,arguments)},input:function(t){t.target.composing||(e.password2=t.target.value)}}}),t("i",{staticClass:"el-icon-view",on:{click:e.changeSee2}})]),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("div",{staticStyle:{width:"350px","text-align":"end"}},[t("span",[e._v("已有帐号，")]),t("button",{staticClass:"login-button",on:{click:e.gotoLogin}},[e._v(" 立即登录 ")])])]),t("el-row",{attrs:{justify:"center",type:"flex"}},[t("button",{staticClass:"regist-button",on:{click:e.Register}},[e._v("注册")])])],1)])])],1)},i=[],n=s(82),o={name:"Register",components:{Navi:n.Z},data(){return{username:"",realname:"",email:"",password1:"",password2:"",canSee1:!1,canSee2:!1}},methods:{changeSee1(){this.canSee1=!this.canSee1},changeSee2(){this.canSee2=!this.canSee2},gotoLogin(){this.$router.push("/login")},Register(){if(""==this.username||""==this.realname||""==this.email||""==this.password1||""==this.password2)return void this.$message.warning("请填写所有空格!");const e=new FormData;e.append("username",this.username),e.append("realname",this.realname),e.append("email",this.email),e.append("password",this.password1),e.append("password2",this.password2),this.$axios({method:"post",url:"/api/v1/auth/register/",data:e}).then((e=>{switch(console.log(e),e.status){case 201:this.$message.success("注册成功"),this.$router.push("/login");break}})).catch((e=>{switch(console.log(e.response.data.code),e.response.data.code){case 1001:this.$message.warning("邮箱已被使用");break;case 1002:this.$message.warning("用户名已被使用");break;case 1003:this.$message.warning("密码与重复密码不匹配");break;case 1004:this.$message.warning("密码需包含字母、数字及符号且字符数>=8");break;default:this.$message.warning("填写信息错误")}}))}}},l=o,r=s(1001),p=(0,r.Z)(l,a,i,!1,null,"0047e20a",null),c=p.exports},1915:function(e,t,s){e.exports=s.p+"img/RegistBg.31afb894.png"}}]);
//# sourceMappingURL=519.3f67ce24.js.map