"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[531],{82:function(t,e,s){s.d(e,{Z:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"Nav"},[e("el-container",[e("el-aside",{attrs:{width:"auto"},nativeOn:{mouseenter:function(e){return t.collapseOpen.apply(null,arguments)},mouseleave:function(e){return t.collapseClose.apply(null,arguments)}}},[e("el-menu",{staticClass:"nav-menu",attrs:{router:!0,collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},[e("el-menu-item",{attrs:{index:"/login"}},[e("i",{staticClass:"el-icon-user"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.username)+" ")])]),e("el-menu-item",{attrs:{index:"/"},on:{click:t.Logout}},[e("i",{staticClass:"el-icon-switch-button"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 退出登录 ")])]),e("el-submenu",[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-office-building"}),e("span",[t._v(" 团队 ")])]),e("el-menu-item-group",t._l(t.joinedTeam,(function(s){return e("el-menu-item",{key:s.index,on:{click:function(e){return t.toTeam(s.id)}}},[t._v(t._s(s.teamName))])})),1)],2),e("el-menu-item",{attrs:{index:"/invitation"}},[e("i",{staticClass:"el-icon-postcard"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 查看邀请 ")])]),e("el-menu-item",{attrs:{index:"/about"}},[e("i",{staticClass:"el-icon-collection"}),e("span",{staticClass:"mainTitle"},[t._v(" 关于墨书 ")])])],1)],1),e("el-main")],1)],1)},i=[],l=s(2094),a={data(){return{isLogin:!1,joinedTeam:[],collapseBtnClick:!1,isCollapse:!0,username:""}},created(){var t;t=l.Z.getters.getUser(l.Z.state()),t&&(this.isLogin=!0,this.username=t.user.username)},mounted(){this.getJoinedTeam()},methods:{collapseStatus(){this.collapseBtnClick=this.isCollapse,this.isCollapse=!this.isCollapse},collapseOpen(){this.collapseBtnClick||(this.isCollapse=!1)},collapseClose(){this.collapseBtnClick||(this.isCollapse=!0)},handleOpen(t,e){console.log(t,e)},handleClose(t,e){console.log(t,e)},Logout(){localStorage.removeItem("token"),this.$store.dispatch("clear"),this.$message.success("登出成功"),setTimeout((()=>{this.$router.push({path:"/"}),location.reload()}),500)},async getJoinedTeam(){if(this.isLogin){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),await this.$axios({method:"get",url:"/api/v1/team/list",headers:t}).then((t=>{console.log(t),this.joinedTeam=t.data.results})).catch((t=>{console.log(t)}))}},toTeam(t){this.$router.push("/team/"+t),setTimeout((()=>{location.reload()}),500)},toInvitation(){this.isLogin?this.$router.push("/invitation"):this.$notify({title:"注意！",message:"请先进行登录",type:"warning"})}}},n=a,r=s(1001),c=(0,r.Z)(n,o,i,!1,null,"7dd34df4",null),u=c.exports},2531:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var o=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"Left"},[e("Navi")],1)]),e("el-col",{attrs:{span:22}},[e("div",{staticClass:"Right"},[e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"Title"},[e("span",[t._v("回收站")])])]),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"deleteAll"},[e("el-button",{staticClass:"deleteAllButton",attrs:{type:"danger",round:"",icon:"el-icon-delete"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("清空回收站")]),e("el-dialog",{attrs:{title:"清空回收站",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",{staticClass:"line1"},[t._v("确定清空回收站？")]),e("span",{staticClass:"line2"},[t._v("注意：确定此操作后所有项目、文档、设计原型等将无法恢复")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.deleteAll}},[t._v("确定")])],1)]),e("el-button",{staticClass:"returnButton",attrs:{type:"info",icon:"el-icon-back",plain:""},on:{click:t.toTeam}},[t._v("返回团队")])],1)])],1),e("el-row",t._l(t.recoveryList,(function(o){return e("el-col",{key:o.id,attrs:{span:7}},[e("div",{staticClass:"recoveryCard"},[e("el-card",{attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[e("img",{staticClass:"image",attrs:{src:s(1261)}}),e("div",{staticStyle:{padding:"14px"}},[e("span",[t._v(t._s(o.title))]),e("div",{staticClass:"bottom clearfix"},[e("time",{staticClass:"type"},[t._v(t._s(o.type))]),e("el-button",{staticClass:"button1",attrs:{type:"text"},on:{click:function(e){return t.Recover(o.id)}}},[t._v("删除")]),e("el-button",{staticClass:"button2",attrs:{type:"text"},on:{click:function(e){return t.Delete(o.id)}}},[t._v("恢复")])],1)])])],1)])})),1)],1)])],1)},i=[],l=s(82),a={name:"Recycle",components:{Navi:l.Z},mounted(){this.getRecoveryList()},data(){return{dialogVisible:!1,recoveryList:[]}},methods:{getRecoveryList(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/recovery/list/"+this.$route.params.id,headers:t}).then((t=>{console.log(t),this.recoveryList=t.data.results;for(let e=0;e<this.recoveryList.length;e++)0==this.recoveryList[e].type&&(this.recoveryList[e].type="项目"),1==this.recoveryList[e].type&&(this.recoveryList[e].type="文档"),2==this.recoveryList[e].type&&(this.recoveryList[e].type="设计原型")})).catch((t=>{console.log(t)}))},Recover(t){var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"put",url:"/api/v1/recovery/"+t,headers:e}).then((t=>{console.log(t),this.$message.success("恢复成功！"),setTimeout((function(){location.reload(!0)}),500)})).catch((t=>{console.log(t)}))},Delete(t){var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"delete",url:"/api/v1/recovery/"+t,headers:e}).then((t=>{console.log(t),this.$message.success("删除成功！"),setTimeout((function(){location.reload(!0)}),500)})).catch((t=>{console.log(t)}))},deleteAll(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"delete",url:"/api/v1/recovery/clear/"+this.$route.params.id,headers:t}).then((t=>{console.log(t),this.$message.success("清空成功！"),this.dialogVisible=!1,setTimeout((function(){location.reload(!0)}),500)})).catch((t=>{console.log(t),this.$message.info("回收站已清空"),this.dialogVisible=!1}))},toTeam(){this.$router.push("/team/"+this.$route.params.id)}}},n=a,r=s(1001),c=(0,r.Z)(n,o,i,!1,null,"7b5db957",null),u=c.exports},1261:function(t,e,s){t.exports=s.p+"img/Project.c55d7e04.jpg"}}]);
//# sourceMappingURL=531.462b065f.js.map