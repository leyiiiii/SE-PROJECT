"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[583],{82:function(t,e,i){i.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"Nav"},[e("el-container",[e("el-aside",{attrs:{width:"auto"},nativeOn:{mouseenter:function(e){return t.collapseOpen.apply(null,arguments)},mouseleave:function(e){return t.collapseClose.apply(null,arguments)}}},[e("el-menu",{staticClass:"nav-menu",attrs:{router:!0,collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose}},[e("el-menu-item",{attrs:{index:"/login"}},[e("i",{staticClass:"el-icon-user"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.username)+" ")])]),e("el-menu-item",{attrs:{index:"/"},on:{click:t.Logout}},[e("i",{staticClass:"el-icon-switch-button"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 退出登录 ")])]),e("el-submenu",[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-office-building"}),e("span",[t._v(" 团队 ")])]),e("el-menu-item-group",t._l(t.joinedTeam,(function(i){return e("el-menu-item",{key:i.index,on:{click:function(e){return t.toTeam(i.id)}}},[t._v(t._s(i.teamName))])})),1)],2),e("el-menu-item",{attrs:{index:"/invitation"}},[e("i",{staticClass:"el-icon-postcard"}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 查看邀请 ")])]),e("el-menu-item",{attrs:{index:"/about"}},[e("i",{staticClass:"el-icon-collection"}),e("span",{staticClass:"mainTitle"},[t._v(" 关于墨书 ")])])],1)],1),e("el-main")],1)],1)},o=[],a=i(2094),n={data(){return{isLogin:!1,joinedTeam:[],collapseBtnClick:!1,isCollapse:!0,username:""}},created(){var t;t=a.Z.getters.getUser(a.Z.state()),t&&(this.isLogin=!0,this.username=t.user.username)},mounted(){this.getJoinedTeam()},methods:{collapseStatus(){this.collapseBtnClick=this.isCollapse,this.isCollapse=!this.isCollapse},collapseOpen(){this.collapseBtnClick||(this.isCollapse=!1)},collapseClose(){this.collapseBtnClick||(this.isCollapse=!0)},handleOpen(t,e){console.log(t,e)},handleClose(t,e){console.log(t,e)},Logout(){localStorage.removeItem("token"),this.$store.dispatch("clear"),this.$message.success("登出成功"),setTimeout((()=>{this.$router.push({path:"/"}),location.reload()}),500)},async getJoinedTeam(){if(this.isLogin){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),await this.$axios({method:"get",url:"/api/v1/team/list",headers:t}).then((t=>{console.log(t),this.joinedTeam=t.data.results})).catch((t=>{console.log(t)}))}},toTeam(t){this.$router.push("/team/"+t),setTimeout((()=>{location.reload()}),500)},toInvitation(){this.isLogin?this.$router.push("/invitation"):this.$notify({title:"注意！",message:"请先进行登录",type:"warning"})}}},l=n,r=i(1001),c=(0,r.Z)(l,s,o,!1,null,"7dd34df4",null),u=c.exports},327:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"Left"},[e("Navi")],1)]),e("el-col",{attrs:{span:22}},[e("div",{staticClass:"Right"},[t._l(t.invitationList,(function(i){return e("el-row",{key:i.index},[e("el-row",[e("el-col",{attrs:{span:14}},[e("div",{staticClass:"invitationTeam"},[e("span",[t._v(t._s(i.team)+" ")])])]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"invitationTeam"},[e("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.Accept(i.id)}}},[t._v("同意")]),e("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){return t.Decline(i.id)}}},[t._v("拒绝")])],1)])],1),e("el-row",[e("el-col",{attrs:{span:14}},[e("div",{staticClass:"invitationInvitor"},[e("span",[t._v("- "+t._s(i.invitedBy)+"邀请您进入团队")])])])],1),e("el-divider")],1)})),0==t.invitationList.length?e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"noInvitation"},[e("span",[t._v("- 暂无邀请 -")])])])],1):t._e()],2)])],1)},o=[],a=i(82),n=i(2094),l={name:"Invitation",components:{Navi:a.Z},data(){return{invitationList:[],isLogin:!1,userId:""}},created(){var t;t=n.Z.getters.getUser(n.Z.state()),t&&(this.userId=t.user.id,this.isLogin=!0)},mounted(){this.getInvitation()},methods:{getInvitation(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/invitation/list",headers:t}).then((t=>{console.log(t),this.invitationList=t.data.results})).catch((t=>{console.log(t)}))},Accept(t){var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"put",url:"/api/v1/invitation/reply/"+t+"/1",headers:e}).then((t=>{console.log(t),console.log("同意成功"),setTimeout((function(){location.reload(!0)}),500)})).catch((t=>{console.log(t)}))},Decline(t){var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"put",url:"/api/v1/invitation/reply/"+t+"/2",headers:e}).then((t=>{console.log(t),console.log("拒绝成功"),setTimeout((function(){location.reload(!0)}),500)})).catch((t=>{console.log(t)}))}}},r=l,c=i(1001),u=(0,c.Z)(r,s,o,!1,null,"18bfe6da",null),p=u.exports}}]);
//# sourceMappingURL=583.260bd3be.js.map