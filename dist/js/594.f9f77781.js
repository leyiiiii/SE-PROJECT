"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[594],{7715:function(t,e,o){o.r(e),o.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"content"},[e("div",{staticClass:"project-name"},[t._v(t._s(t.projectName))]),e("div",{staticClass:"content-title"},[e("i",{staticClass:"el-icon-s-unfold"}),t._v(" 文档 "),e("div",{staticClass:"add-icon",on:{click:t.add}},[t._v("+")])]),t._l(t.documentList,(function(o){return e("li",{key:o.id,on:{click:function(e){return t.openDoc(o.id)}}},[e("i",{staticClass:"el-icon-document"}),t._v(" "+t._s(o.title)+" ")])}))],2)]),e("el-col",{attrs:{span:18,offset:1}},[t.status?e("div",{staticClass:"doc-title"},[t._v(t._s(t.title))]):t._e(),t.status?e("div",{staticClass:"doc-desc"},[t._v(t._s(t.description))]):t._e(),t.isOpenADoc?e("Editor"):t._e()],1)],1)},s=[],a=o(8417),n={name:"test",components:{Editor:a.Z},data(){return{isOpenADoc:!0,status:!1,iconFormVisible:!1,userInfo:{},dialogTitle:"增加",rowIndex:null,projectId:"",projectName:"",haveDocument:!1,documentId:"",title:"",description:"",documentContent:"",createdAt:"",createdBy:"",belongTo:"",updatedAt:"",documentList:[]}},created(){var t=this.$route.params.id.split("&");this.projectId=t[0],t.length>1?(this.isOpenADoc=!0,this.documentId=t[2],this.getDocDetail()):this.isOpenADoc=!1,this.getProject(),this.getDocument()},methods:{openDoc(t){this.$router.replace("/project/"+this.projectId+"&doc&"+t),window.location.reload()},add(){let t=new FormData;t.append("title","Unknown Document"),t.append("description","文档描述"),t.append("content",JSON.stringify("<p>this is a document</p>")),t.append("projectId",this.projectId);var e={};localStorage.getItem("token")&&(e={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"post",url:"/api/v1/document/create/"+this.projectId,data:t,headers:e}).then((t=>{console.log(t.data),this.openDoc(t.data.id)})).catch((t=>{console.log(t)}))},handleEdit(t,e){this.dialogTitle="编辑",this.userInfo=e,this.iconFormVisible=!0,this.rowIndex=t},submitUser(){if("编辑"===this.dialogTitle)return this.tableData.splice(this.rowIndex,1,this.userInfo),void(this.iconFormVisible=!1);this.tableData.splice(0,0,this.userInfo),this.iconFormVisible=!1},remove(t,e){this.$confirm(`确定删除${e.name}吗?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((()=>{this.tableData.splice(t,1)}))},async getDocDetail(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),await this.$axios({method:"get",url:"/api/v1/document/"+this.documentId,headers:t}).then((t=>{console.log(t.data);var e=t.data;this.documentContent=e.content,this.belongTo=e.belongTo,this.createdAt=e.createdAt,this.updatedAt=e.updatedAt,this.createdBy=e.createdBy,this.title=e.title,this.description=e.description,this.status=!0})).catch((t=>{console.log(t)}))},getDocument(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/document/list?belongTo="+this.projectId,headers:t}).then((t=>{console.log(t.data.results),this.documentList=t.data.results,this.documentList.length>0&&(this.haveDocument=!0)})).catch((t=>{console.log(t)}))},getProject(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/project/"+this.projectId,headers:t}).then((t=>{this.projectId=this.projectId,this.projectName=t.data.title})).catch((t=>{console.log(t)}))}}},c=n,r=o(3736),l=(0,r.Z)(c,i,s,!1,null,"66687e49",null),d=l.exports}}]);
//# sourceMappingURL=594.f9f77781.js.map