{"version":3,"file":"js/594.f9f77781.js","mappings":"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","sources":["webpack://se-project/./src/components/Document.vue","webpack://se-project/src/components/Document.vue","webpack://se-project/./src/components/Document.vue?6e74","webpack://se-project/./src/components/Document.vue?23a8"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-row',[_c('el-col',{attrs:{\"span\":3}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"project-name\"},[_vm._v(_vm._s(_vm.projectName))]),_c('div',{staticClass:\"content-title\"},[_c('i',{staticClass:\"el-icon-s-unfold\"}),_vm._v(\" 文档 \"),_c('div',{staticClass:\"add-icon\",on:{\"click\":_vm.add}},[_vm._v(\"+\")])]),_vm._l((_vm.documentList),function(item){return _c('li',{key:item.id,on:{\"click\":function($event){return _vm.openDoc(item.id)}}},[_c('i',{staticClass:\"el-icon-document\"}),_vm._v(\" \"+_vm._s(item.title)+\" \")])})],2)]),_c('el-col',{attrs:{\"span\":18,\"offset\":1}},[(_vm.status)?_c('div',{staticClass:\"doc-title\"},[_vm._v(_vm._s(_vm.title))]):_vm._e(),(_vm.status)?_c('div',{staticClass:\"doc-desc\"},[_vm._v(_vm._s(_vm.description))]):_vm._e(),(_vm.isOpenADoc)?_c('Editor'):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-row>\r\n    <el-col :span=\"3\">\r\n      <div class=\"content\">\r\n        <div class=\"project-name\">{{ projectName }}</div>\r\n        <div class=\"content-title\">\r\n          <i class=\"el-icon-s-unfold\"></i>\r\n          文档\r\n          <div class=\"add-icon\" @click=\"add\">+</div>\r\n        </div>\r\n        <li v-for=\"item in documentList\" :key=\"item.id\" @click=\"openDoc(item.id)\">\r\n          <i class=\"el-icon-document\"></i>\r\n          {{ item.title }}\r\n        </li>\r\n      </div></el-col>\r\n    <el-col :span=\"18\" :offset=\"1\">\r\n      <div class=\"doc-title\" v-if=\"status\">{{ title }}</div>\r\n      <div class=\"doc-desc\" v-if=\"status\">{{ description }}</div>\r\n      <Editor v-if=\"isOpenADoc\"></Editor>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\n// import {mapActions, mapGetters} from \"vuex\";\r\nimport Editor from \"@/components/Editor\";\r\nexport default {\r\n  name: \"test\",\r\n  components: {\r\n    Editor\r\n},\r\n  data() {\r\n    return {\r\n      isOpenADoc: true,\r\n      status:false,\r\n      iconFormVisible: false,\r\n      userInfo: {},\r\n      dialogTitle: '增加',\r\n      rowIndex: null,\r\n      projectId: \"\",\r\n      projectName: \"\",\r\n      haveDocument: false,\r\n      documentId: \"\",\r\n      title: \"\",\r\n      description: \"\",\r\n      documentContent: \"\",\r\n      createdAt: \"\",\r\n      createdBy: \"\",\r\n      belongTo: \"\",\r\n      updatedAt: \"\",\r\n      documentList: [],\r\n    };\r\n  },\r\n  created() {\r\n    var arr = this.$route.params.id.split(\"&\");\r\n    this.projectId = arr[0];\r\n    if(arr.length > 1) {\r\n      this.isOpenADoc = true;\r\n      this.documentId = arr[2];\r\n      this.getDocDetail();\r\n    }\r\n    else this.isOpenADoc = false;\r\n    this.getProject();\r\n    this.getDocument();\r\n  },\r\n  methods: {\r\n    openDoc(id) {\r\n      this.$router.replace(\"/project/\" + this.projectId + \"&doc&\" + id);\r\n      window.location.reload();\r\n    },\r\n    // ...mapActions([\r\n    // ]),\r\n    // 增加\r\n    add() {\r\n      let formData = new FormData();\r\n      formData.append(\"title\", \"Unknown Document\");\r\n      formData.append(\"description\", \"文档描述\");\r\n      formData.append(\"content\", JSON.stringify(\"<p>this is a document</p>\"));\r\n      formData.append(\"projectId\", this.projectId);\r\n\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"post\",\r\n        url: \"/api/v1/document/create/\" + this.projectId,\r\n        data: formData,\r\n        headers: header,\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.openDoc(res.data.id);\r\n      })\r\n      .catch((err) =>{\r\n        console.log(err);\r\n      });\r\n\r\n\r\n    },\r\n    // 编辑\r\n    handleEdit(index, row) {\r\n      this.dialogTitle = '编辑';\r\n      this.userInfo = row;\r\n      this.iconFormVisible = true;\r\n      this.rowIndex = index;\r\n    },\r\n    // 弹窗确定\r\n    submitUser() {\r\n      if (this.dialogTitle === '编辑') {\r\n        this.tableData.splice(this.rowIndex, 1, this.userInfo);\r\n        this.iconFormVisible = false;\r\n        return;\r\n      }\r\n      this.tableData.splice(0, 0, this.userInfo);\r\n      this.iconFormVisible = false;\r\n    },\r\n    // 删除\r\n    remove(index, row) {\r\n      this.$confirm(`确定删除${row.name}吗?`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'error',\r\n      }).then(() => {\r\n        this.tableData.splice(index, 1);\r\n      });\r\n    },\r\n    async getDocDetail() {\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      await this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/document/\" + this.documentId,\r\n        headers: header,\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        var r = res.data;\r\n        this.documentContent = r.content;\r\n        this.belongTo = r.belongTo;\r\n        this.createdAt = r.createdAt;\r\n        this.updatedAt = r.updatedAt;\r\n        this.createdBy = r.createdBy;\r\n        this.title = r.title;\r\n        this.description = r.description;\r\n        this.status = true;\r\n      })\r\n      .catch((err) =>{\r\n        console.log(err);\r\n      });\r\n    },\r\n    getDocument() {\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/document/list?belongTo=\" + this.projectId,\r\n        headers: header,\r\n      })\r\n      .then((res) => {\r\n        console.log(res.data.results);\r\n        this.documentList = res.data.results;\r\n        if(this.documentList.length > 0) {\r\n                this.haveDocument = true;\r\n            }\r\n      })\r\n      .catch((err) =>{\r\n        console.log(err);\r\n      });\r\n    },\r\n    getProject() {\r\n      var header = {};\r\n      if (localStorage.getItem(\"token\"))\r\n        header = { Authorization: \"Bearer \" + localStorage.getItem(\"token\") };\r\n      this.$axios({\r\n        method: \"get\",\r\n        url: \"/api/v1/project/\" + this.projectId,\r\n        headers: header,\r\n      })\r\n      .then((res) => {\r\n        this.projectId = this.projectId;\r\n        this.projectName = res.data.title;\r\n      })\r\n      .catch((err) =>{\r\n        console.log(err);\r\n      });\r\n    }\r\n  },\r\n  // computed: {\r\n  //   ...mapGetters({\r\n  //   }),\r\n  // },\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.doc-title {\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n.doc-desc {\r\n  color: gray;\r\n  margin-bottom: 5px;\r\n}\r\n.add-icon:hover, .content li:hover {\r\n  cursor: pointer;\r\n}\r\n.add-icon {\r\n  display: inline-block;\r\n  color: darkgray;\r\n  margin-left: 20px;\r\n}\r\n.content li {\r\n  margin: 5px 0;\r\n}\r\n.content-title {\r\n  margin: 10px 0;\r\n}\r\n.content {\r\n  padding: 10px 20px;\r\n  background-color: beige;\r\n  height: 100vh;\r\n}\r\n.project-name {\r\n  font-weight: 600;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Document.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Document.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Document.vue?vue&type=template&id=66687e49&scoped=true&\"\nimport script from \"./Document.vue?vue&type=script&lang=js&\"\nexport * from \"./Document.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Document.vue?vue&type=style&index=0&id=66687e49&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"66687e49\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_v","_s","projectName","on","add","_l","documentList","item","key","id","$event","openDoc","title","status","_e","description","isOpenADoc","staticRenderFns","name","components","Editor","data","iconFormVisible","userInfo","dialogTitle","rowIndex","projectId","haveDocument","documentId","documentContent","createdAt","createdBy","belongTo","updatedAt","created","methods","window","formData","header","Authorization","method","url","headers","then","res","console","catch","err","handleEdit","submitUser","remove","confirmButtonText","cancelButtonText","type","getDocument","getProject","component"],"sourceRoot":""}