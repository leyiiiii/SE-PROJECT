"use strict";(self["webpackChunkse_project"]=self["webpackChunkse_project"]||[]).push([[796],{7796:function(t,e,n){n.r(e),n.d(e,{default:function(){return C}});var i=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"bg"},[e("el-button",{staticClass:"back",on:{click:t.back}},[t._v("返回")]),e("el-button",{staticClass:"getAddress",on:{click:function(e){t.dialogVisible=!0}}},[t._v("生成预览链接")]),e("el-dialog",{attrs:{"append-to-body":"true",title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("h3",[t._v("复制以下链接，在浏览器打开以观看原型设计页面预览图:")]),e("p",[t._v(t._s(t.currentWebsiteLink))]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)]),e("el-select",{staticClass:"selectPage",attrs:{clearable:"",placeholder:"切换页面"},on:{change:function(e){return t.select(t.value)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.designList,(function(n,i){return e("el-option",{key:i,attrs:{value:"页面"+(i+1)+"："+n.title}},[t._v(" "+t._s("页面"+(i+1)+"："+n.title)+" ")])})),1),e("div",{staticClass:"canvas-container"},[e("div",{staticClass:"canvas",style:{...t.getCanvasStyle(t.canvasStyleData),width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}},t._l(t.copyData,(function(t,n){return e("ComponentWrapper",{key:n,attrs:{config:t}})})),1)])],1)},a=[],s=n(9748),o=n(629),l=function(){var t=this,e=t._self._c;return e("div",{on:{click:t.onClick,mouseenter:t.onMouseEnter}},[t.config.component.startsWith("SVG")?e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}}):e(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config,request:t.config.request,linkage:t.config.linkage}})],1)},c=[],r=n(3229),p=n(6683),u=n(4003),d={mixins:[p.tA],props:{config:{type:Object,required:!0,default:()=>{}}},mounted(){(0,r.Z)(this.$refs.component.$el,this.config.animations)},methods:{getStyle:s.C2,getSVGStyle:s.WF,onClick(){const t=this.config.events;Object.keys(t).forEach((e=>{this[e](t[e])})),u.Z.$emit("v-click",this.config.id)},onMouseEnter(){u.Z.$emit("v-hover",this.config.id)}}},g=d,h=n(1001),m=(0,h.Z)(g,l,c,!1,null,"195f3027",null),f=m.exports,v=n(1457),y=n(2648),S={components:{ComponentWrapper:f},props:{isScreenshot:{type:Boolean,default:!1}},data(){return{copyData:[],designList:[],value:"",status:!1,dialogVisible:!1,currentWebsiteLink:window.location.href}},computed:(0,o.rn)(["componentData","canvasStyleData"]),created(){var t={};localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/diagram/list?belongTo="+this.$route.params.id.split("&")[0],headers:t}).then((t=>{this.designList=t.data.results,console.log(this.designList)})).catch((t=>{console.log(t)})),t={},localStorage.getItem("token")&&(t={Authorization:"Bearer "+localStorage.getItem("token")}),this.$axios({method:"get",url:"/api/v1/diagram/"+this.$route.params.id.split("&")[2],headers:t}).then((t=>{var e=t.data;this.title=e.title,this.$store.commit("setCanvasStyle",JSON.parse(e.canvasStyleData)),this.$store.commit("setComponentData",JSON.parse(e.componentData)),this.$set(this,"copyData",(0,y.p$)(JSON.parse(e.componentData)))})).catch((t=>{console.log(t)}))},methods:{getStyle:s.C2,getCanvasStyle:s.$i,changeStyleWithScale:v.EY,close(){this.$emit("close")},back(){this.$router.back()},getAddress(){this.$message(window.location.href)},select(t){let e=t.split("：")[0].substring(2,t.indexOf("："));this.$store.commit("setCanvasStyle",JSON.parse(this.designList[e-1].canvasStyleData)),this.$store.commit("setComponentData",JSON.parse(this.designList[e-1].componentData)),this.$set(this,"copyData",(0,y.p$)(JSON.parse(this.designList[e-1].componentData)));var n=this.$route.params.id.split("&"),i=n[0],a=this.designList[e-1].id,s=this.currentWebsiteLink.split("/preview")[0]+"/preview/"+i+"&design&"+a;this.currentWebsiteLink=s}}},k=S,b=(0,h.Z)(k,i,a,!1,null,"1a8877fe",null),C=b.exports},6683:function(t,e,n){n.d(e,{oQ:function(){return s},tA:function(){return a}});const i={redirect(t){t&&(window.location.href=t)},alert(t){t&&alert(t)}},a={methods:i},s=[{key:"redirect",label:"跳转事件",event:i.redirect,param:""},{key:"alert",label:"alert 事件",event:i.alert,param:""}]},3229:function(t,e,n){async function i(t,e=[]){const n=e=>new Promise((n=>{const{animationTime:i,value:s="",isLoop:o}=e;t.style.setProperty("--time",i+"s"),t.classList.add(s,"animated",a(o));const l=()=>{t.removeEventListener("animationend",l),t.removeEventListener("animationcancel",l),t.classList.remove(s,"animated",a(o)),t.style.removeProperty("--time"),n()};t.addEventListener("animationend",l),t.addEventListener("animationcancel",l)}));for(let i=0,a=e.length;i<a;i++)await n(e[i])}function a(t){return t?"infinite":"no-infinite"}n.d(e,{Z:function(){return i}})}}]);
//# sourceMappingURL=796.8cc668ed.js.map