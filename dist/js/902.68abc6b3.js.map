{"version":3,"file":"js/902.68abc6b3.js","mappings":"gKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,OAAO,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,IAAI,CAACH,EAAG,kBAAkB,GAAGA,EAAG,WAAWA,EAAG,UAAU,CAACE,YAAY,QAAQ,CAACF,EAAG,iBAAiBA,EAAG,0BAA0B,GAAGA,EAAG,UAAU,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,UAAUE,GAAG,CAAC,KAAON,EAAIO,WAAW,SAAWP,EAAIQ,eAAe,UAAYR,EAAIS,gBAAgB,QAAUT,EAAIU,uBAAuB,CAACR,EAAG,WAAW,KAAKA,EAAG,UAAU,CAACE,YAAY,SAAS,CAAEJ,EAAIW,aAAcT,EAAG,UAAU,CAACU,MAAM,CAACC,MAAOb,EAAIc,WAAYC,SAAS,SAAUC,GAAMhB,EAAIc,WAAWE,CAAI,EAACC,WAAW,eAAe,CAACf,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,SAAS,CAACH,EAAGF,EAAIW,aAAaO,UAAY,OAAO,CAACC,IAAI,eAAe,GAAGjB,EAAG,cAAc,CAACkB,YAAY,CAAC,cAAc,QAAQf,MAAM,CAAC,MAAQ,KAAK,KAAO,cAAc,CAACH,EAAG,kBAAkB,GAAGA,EAAG,cAAc,CAACkB,YAAY,CAAC,cAAc,QAAQf,MAAM,CAAC,MAAQ,KAAK,KAAO,WAAW,CAACH,EAAG,cAAc,IAAI,GAAGA,EAAG,eAAe,IAAI,IAClgC,EACGmB,EAAkB,G,iICgEtB,GACAC,WAAAA,CACAC,cADA,IAEAC,OAFA,IAEAC,cAFA,IAEAC,cAFA,IAEAC,UAFA,IAEAC,QAFA,IAEAC,sBAFA,IAEAC,WAAAA,EAAAA,GAEAC,OACA,OACAjB,WAAAA,OACAkB,0BAAAA,EAEA,EACAC,UAAAA,EAAAA,EAAAA,IAAAA,CACA,gBACA,eACA,mBACA,kBACA,WAEAC,UACA,gBAEAC,EAAAA,EAAAA,IACA,EACAC,QAAAA,CACAC,UAEA,oCACA,sFAGA,qCACA,oFAEA,EAEA9B,WAAAA,GACA+B,EAAAA,iBACAA,EAAAA,kBACA,wCACA,sCACA,MACA,0BACApB,EAAAA,MAAAA,IAAAA,EAAAA,QAAAA,EAAAA,EACAA,EAAAA,MAAAA,KAAAA,EAAAA,QAAAA,EAAAA,EACAA,EAAAA,IAAAA,EAAAA,EAAAA,KACA,mCAAAA,cACA,oCACA,CACA,EAEAV,eAAAA,GACA8B,EAAAA,iBACAA,EAAAA,aAAAA,WAAAA,MACA,EAEA7B,gBAAAA,GACA6B,EAAAA,kBACA,iDACA,0CACA,EAEA5B,qBAAAA,GACA,uBACA,sCAAAQ,UAAAA,KAAAqB,MAAAA,OAIA,aACA,qCAEA,ICxIoR,I,UCQhRrB,GAAY,OACd,EACAnB,EACAsB,GACA,EACA,KACA,KACA,MAIF,EAAeH,EAAiB,O","sources":["webpack://se-project/./src/views/Design.vue","webpack://se-project/src/views/Design.vue","webpack://se-project/./src/views/Design.vue?ed67","webpack://se-project/./src/views/Design.vue?4a32"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"design\"},[_c('main',[_c('el-col',{attrs:{\"span\":2}},[_c('NavigationBar')],1),_c('Toolbar'),_c('section',{staticClass:\"left\"},[_c('ComponentList'),_c('RealTimeComponentList')],1),_c('section',{staticClass:\"center\"},[_c('div',{staticClass:\"content\",on:{\"drop\":_vm.handleDrop,\"dragover\":_vm.handleDragOver,\"mousedown\":_vm.handleMouseDown,\"mouseup\":_vm.deselectCurComponent}},[_c('Editor')],1)]),_c('section',{staticClass:\"right\"},[(_vm.curComponent)?_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"属性\",\"name\":\"attr\"}},[_c(_vm.curComponent.component + 'Attr',{tag:\"component\"})],1),_c('el-tab-pane',{staticStyle:{\"padding-top\":\"20px\"},attrs:{\"label\":\"动画\",\"name\":\"animation\"}},[_c('AnimationList')],1),_c('el-tab-pane',{staticStyle:{\"padding-top\":\"20px\"},attrs:{\"label\":\"事件\",\"name\":\"events\"}},[_c('EventList')],1)],1):_c('CanvasAttr')],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"design\">\r\n\r\n\r\n\r\n\r\n    <main>\r\n      <el-col :span=\"2\">\r\n        <NavigationBar></NavigationBar>\r\n      </el-col>\r\n      <Toolbar/>\r\n      <!-- 左侧组件列表 -->\r\n\r\n\r\n      <section class=\"left\">\r\n        <ComponentList/>\r\n        <RealTimeComponentList/>\r\n      </section>\r\n      <!-- 中间画布 -->\r\n      <section class=\"center\">\r\n        <div\r\n            class=\"content\"\r\n            @drop=\"handleDrop\"\r\n            @dragover=\"handleDragOver\"\r\n            @mousedown=\"handleMouseDown\"\r\n            @mouseup=\"deselectCurComponent\"\r\n        >\r\n          <Editor/>\r\n        </div>\r\n      </section>\r\n      <!-- 右侧属性列表 -->\r\n      <section class=\"right\">\r\n        <el-tabs v-if=\"curComponent\" v-model=\"activeName\">\r\n          <el-tab-pane label=\"属性\" name=\"attr\">\r\n            <component :is=\"curComponent.component + 'Attr'\"/>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"动画\" name=\"animation\" style=\"padding-top: 20px;\">\r\n            <AnimationList/>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"事件\" name=\"events\" style=\"padding-top: 20px;\">\r\n            <EventList/>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n        <CanvasAttr v-else></CanvasAttr>\r\n      </section>\r\n\r\n\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Editor from '@/components/Editor/index'\r\nimport ComponentList from '@/components/ComponentList' // 左侧列表组件\r\nimport AnimationList from '@/components/AnimationList' // 右侧动画列表\r\nimport EventList from '@/components/EventList' // 右侧事件列表\r\nimport componentList from '@/custom-component/component-list' // 左侧列表数据\r\nimport Toolbar from '@/components/Toolbar'\r\nimport {deepCopy} from '@/utils/utils'\r\nimport {mapState} from 'vuex'\r\nimport generateID from '@/utils/generateID'\r\nimport {listenGlobalKeyDown} from '@/utils/shortcutKey'\r\nimport RealTimeComponentList from '@/components/RealTimeComponentList'\r\nimport CanvasAttr from '@/components/CanvasAttr'\r\nimport NavigationBar from \"@/components/NavigationBar\";\r\n\r\nexport default {\r\n  components: {\r\n    NavigationBar,\r\n    Editor, ComponentList, AnimationList, EventList, Toolbar, RealTimeComponentList, CanvasAttr\r\n  },\r\n  data() {\r\n    return {\r\n      activeName: 'attr',\r\n      reSelectAnimateIndex: undefined,\r\n    }\r\n  },\r\n  computed: mapState([\r\n    'componentData',\r\n    'curComponent',\r\n    'isClickComponent',\r\n    'canvasStyleData',\r\n    'editor',\r\n  ]),\r\n  created() {\r\n    this.restore()\r\n    // 全局监听按键事件\r\n    listenGlobalKeyDown()\r\n  },\r\n  methods: {\r\n    restore() {\r\n      // 用保存的数据恢复画布\r\n      if (localStorage.getItem('canvasData')) {\r\n        this.$store.commit('setComponentData', JSON.parse(localStorage.getItem('canvasData')))\r\n      }\r\n\r\n      if (localStorage.getItem('canvasStyle')) {\r\n        this.$store.commit('setCanvasStyle', JSON.parse(localStorage.getItem('canvasStyle')))\r\n      }\r\n    },\r\n\r\n    handleDrop(e) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      const index = e.dataTransfer.getData('index')\r\n      const rectInfo = this.editor.getBoundingClientRect()\r\n      if (index) {\r\n        const component = deepCopy(componentList[index])\r\n        component.style.top = e.clientY - rectInfo.y\r\n        component.style.left = e.clientX - rectInfo.x\r\n        component.id = generateID()\r\n        this.$store.commit('addComponent', {component})\r\n        this.$store.commit('recordSnapshot')\r\n      }\r\n    },\r\n\r\n    handleDragOver(e) {\r\n      e.preventDefault()\r\n      e.dataTransfer.dropEffect = 'copy'\r\n    },\r\n\r\n    handleMouseDown(e) {\r\n      e.stopPropagation()\r\n      this.$store.commit('setClickComponentStatus', false)\r\n      this.$store.commit('setInEditorStatus', true)\r\n    },\r\n\r\n    deselectCurComponent(e) {\r\n      if (!this.isClickComponent) {\r\n        this.$store.commit('setCurComponent', {component: null, index: null})\r\n      }\r\n\r\n      // 0 左击 1 滚轮 2 右击\r\n      if (e.button != 2) {\r\n        this.$store.commit('hideContextMenu')\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.design {\r\n  height: 100vh;\r\n  background: #fff;\r\n\r\n  main {\r\n    height: calc(100% - 64px);\r\n    position: relative;\r\n\r\n    .left {\r\n      //margin-left: 130px;\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 200px;\r\n      left: 130px;\r\n      top: 70px;\r\n\r\n      & > div {\r\n        overflow: auto;\r\n\r\n        &:first-child {\r\n          border-bottom: 1px solid #ddd;\r\n        }\r\n      }\r\n    }\r\n\r\n    .right {\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 288px;\r\n      right: 0;\r\n      top: 70px;\r\n\r\n      .el-select {\r\n        width: 100%;\r\n      }\r\n    }\r\n\r\n    .center {\r\n      margin-left: 330px;\r\n      margin-right: 288px;\r\n      background: #f5f5f5;\r\n      height: 100%;\r\n      overflow: auto;\r\n      padding: 20px;\r\n\r\n      .content {\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: auto;\r\n      }\r\n    }\r\n  }\r\n\r\n  .placeholder {\r\n    text-align: center;\r\n    color: #333;\r\n  }\r\n\r\n  .global-attr {\r\n    padding: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Design.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Design.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Design.vue?vue&type=template&id=6a58ea52&\"\nimport script from \"./Design.vue?vue&type=script&lang=js&\"\nexport * from \"./Design.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Design.vue?vue&type=style&index=0&id=6a58ea52&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","handleDrop","handleDragOver","handleMouseDown","deselectCurComponent","curComponent","model","value","activeName","callback","$$v","expression","component","tag","staticStyle","staticRenderFns","components","NavigationBar","Editor","ComponentList","AnimationList","EventList","Toolbar","RealTimeComponentList","CanvasAttr","data","reSelectAnimateIndex","computed","created","listenGlobalKeyDown","methods","restore","e","index"],"sourceRoot":""}